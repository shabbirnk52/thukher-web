<script>
/*=============================================
=            ScrollMagic intialization            =
=============================================*/

// init controller
var controller = new ScrollMagic.Controller();
/*=====  End of ScrollMagic intialization  ======*/


// Wrap every letter in a span
// var TitleServices = document.querySelector('.title-services');
// TitleServices.innerHTML = textWrapper.textContent.replace(/\S/g, "<span class='letter'>$&</span>");
// var TitleTimeline = document.querySelector('.title-timeline');
// TitleTimeline.innerHTML = textWrapper.textContent.replace(/\S/g, "<span class='letter'>$&</span>");

$('.letter-animation').html(function (i, html) {
    var chars = $.trim(html).split("");
    return "<span class='letter'>" + chars.join("</span><span class='letter'>") + "</span>";
});


function funAnimateTitle(el ) {
  anime.remove(el);
  anime({
    // loop: false, 
    // autoplay: true,
    easing: "easeOutExpo",
    duration: 950,
    targets: el,
      scale: [4,1],
      opacity: [0,1],
      translateZ: 0,      
      delay:(el, i) => 70*i
  });
  }


// var tl = anime({
//   loop: false, 
//   autoplay: false,
//   easing: "easeOutExpo",
//   duration: 950,
//   targets: '.ml2 .letter',
//     scale: [4,1],
//     opacity: [0,1],
//     translateZ: 0,
    
//     delay:(el, i) => 70*i
// });
// tl.play();

// create a scene
// new ScrollMagic.Scene({
//   triggerElement: ".letter-animation",
//   triggerHook: 0.5,
// })
// .on("enter", function (event) {
//   // tl.play();
//   funAnimateTitle( '.letter-animation .letter')
//   console.log("enter")
// })
//   .addTo(controller); // assign the scene to the controller

$(document).ready(function() {
    $('.letter-animation').each(function () {
    new ScrollMagic.Scene({
      triggerElement: this,
      triggerHook: 'onEnter'
    })    
    .addTo(controller) // assign the scene to the controller
    .on("enter", function (event) {  
        funAnimateTitle( '.letter-animation .letter')
        console.log('triggered');
    });
    

});
});

    
    
    </script>